<!DOCTYPE HTML><html>	<title>EL Temp Project</title>	<head>		<link rel="icon" href="../images/icon.jpg">		<link rel="stylesheet" href="TempStyle.css">		<link href="https://fonts.googleapis.com/css?family=Encode+Sans+Condensed|Source+Code+Pro" rel="stylesheet">    		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>		<script type="text/javascript"> 		var ajaxReq; 		var htm; 		function Disp(url) { 			try { 				ajaxReq = new XMLHttpRequest();			 } catch (e) { 				alert("XMLHttpRequest didn't work!"); 			return; 			} 		ajaxReq.open("GET", url, true); 		ajaxReq.send();		ajaxReq.onreadystatechange = callBack() ; 		} 		function callBack () { 			if (ajaxReq.readyState == 4) { 				this.htm = ajaxReq.responseText; 		} 			document.getElementById("demo").innerHTML = this.htm; 		}    	</script>	<script src="/socket.io/socket.io.js"></script>	</head>	<body onload="today()">		<div id="header">			<h1>Temperature Log Website</h1>			<h2>Seraphim Dmitrieff -- Embedded Linux</h2>			<hr>		</div>				<div id="demo">		<p>		This Program takes the user input for dates below. It then utilizes a 		web socket to transmit the request to our NodeJS based server calling a python method to query the SQLite3		database and save the results to a JSON file stored on the server's end. The client then calls on this data with JQuery and processes		the data displaying it as a table.		</p>		</div>				<div id="date_input">						<h3>Enter the Desired Date Range:</h3>			Start Date: <input type="date" id="start"> &nbsp&nbsp&nbsp&nbsp			End Date: <input type="date" id="end">			<br><br>			<button onclick="getData(); myData = setTimeout(dispTable, 500)">Get Results</button>		</div>		</body>	<script>				var socket;		function today(){				var curr = new Date();			var yyyy = curr.getFullYear().toString();			var MM = (curr.getMonth()+1);				if(MM<10){					MM = "0"+MM.toString();				}				else{					MM = MM.toString();				}			var dd = curr.getDate();				if(dd<10){					dd = "0"+dd.toString();				}				else{					dd = dd.toString();				}			var today = yyyy+"-"+MM+"-"+dd;							document.getElementById("end").value = today;			document.getElementById("start").max = today			document.getElementById("end").max = today;						socket = io.connect('http://localhost:12001');			console.log('load');		}		function getData() {    			var startDate = document.getElementById("start").value;			var endDate = document.getElementById("end").value;			var error = "Start date exceeds end date, please check the start date and resubmit your request"			if(startDate>endDate || startDate == 0){								Disp('error.html');			}			else{				startDate = startDate.toString();				startDate = startDate.substring(2,4)+startDate.substring(5,7)+startDate.substring(8);    							endDate = endDate.toString();				endDate = endDate.substring(2,4)+endDate.substring(5,7)+endDate.substring(8);				console.log('Start Date: ', startDate);				console.log('End Date: ', endDate);												socket.emit('query', startDate+endDate);				socket.on('data', function (data) {					console.log(data);					Disp('chart.html');									});			}				}			 		var ajaxReq; 		var htm; 		function Disp(url) { 			try { 				ajaxReq = new XMLHttpRequest();			 } catch (e) { 				alert("XMLHttpRequest didn't work!"); 			return; 			} 		ajaxReq.open("GET", url, true); 		ajaxReq.send();		ajaxReq.onreadystatechange = callBack ; 		} 		function callBack () { 			if (ajaxReq.readyState == 4) { 				this.htm = ajaxReq.responseText; 			} 			document.getElementById("demo").innerHTML = this.htm; 		}	</script>	<script>	function dispTable() {	$(document).ready(function() {		$.getJSON("data.json", function(data) {			var arrItems = [];			$.each(data, function (index, value) {				arrItems.push(value);			});			var col = [];			for (var i = 0; i < arrItems.length; i++) {				for (var key in arrItems[i]) {					if (col.indexOf(key) === -1) {						col.push(key);					}				}			}			var table = document.createElement("table");			var tr = table.insertRow(-1);			for (var i = 0; i < col.length; i++) {				var th = document.createElement("th");				th.innerHTML = col[i];				tr.appendChild(th);			}			for (var i = 0; i < arrItems.length; i++) {								tr = table.insertRow(-1);				for (var j = 0; j < col.length; j++) {					var tabCell = tr.insertCell(-1);					tabCell.innerHTML = arrItems[i][col[j]];				}			}			var divContainer = document.getElementById("showData");			divContainer.innerHTML = "";			divContainer.appendChild(table);		});	});	}	</script></html>